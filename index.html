<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Main Page</title>
    <link rel="stylesheet" href="css style/main_pagestyle.css" />
    <!-- Include Main Page Stylesheet -->
    <link rel="stylesheet" href="css style/navbar_style.css" />

    <!-- Boxicon -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@latest/css/boxicons.min.css"
    />

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
      rel="stylesheet"
    />

    <!--- Java Script Connection --->
    <script src="script.js" defer></script>
    <script
      src="https://kit.fontawesome.com/26bb1f1303.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="navbar-container">
      <script>
        fetch("pages/navbar.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("navbar-container").innerHTML = data;

            // Attach event listeners AFTER navbar is loaded
            const showSidebar = () => {
              document.querySelector(".sidebar").style.display = "flex";
            };

            const hideSidebar = () => {
              document.querySelector(".sidebar").style.display = "none";
            };

            document
              .querySelector(".menu-button")
              .addEventListener("click", showSidebar);
            document
              .querySelector(".sidebar li")
              .addEventListener("click", hideSidebar);

            // Handle dynamic Login/Logout
            const authLink = document.getElementById("authLink");
            const authLinkDesktop = document.getElementById("authLinkDesktop");
            const currentUser = localStorage.getItem("currentUser");

            if (currentUser) {
              authLink.textContent = "Logout";
              authLink.href = "#";
              authLink.addEventListener("click", () => {
                localStorage.removeItem("currentUser");
                alert("You have been logged out!");
                window.location.reload();
              });

              authLinkDesktop.textContent = "Logout";
              authLinkDesktop.href = "#";
              authLinkDesktop.addEventListener("click", () => {
                localStorage.removeItem("currentUser");
                alert("You have been logged out!");
                window.location.reload();
              });
            } else {
              authLink.textContent = "Login";
              authLink.href = "/BujinsBatik/users/login.html";

              authLinkDesktop.textContent = "Login";
              authLinkDesktop.href = "/BujinsBatik/users/login.html";
            }
          })
          .catch((error) => console.error("Error loading navbar:", error));
      </script>
    </div>

    <!--- Home Area --->
    <section class="home">
      <div class="home-text">
        <h1>Bujin's Batik</h1>
        <p>
          Batik fashion blends tradition with style, showcasing intricate
          patterns and craftsmanship. This industry celebrates cultural heritage
          through unique and stylish clothing pieces.
        </p>
        <a href="https://wa.me/+60132928980" class="homecta-btn">Contact Us</a>
      </div>

      <div class="home-img">
        <img src="img/Bujins Owner.png" alt="" />
      </div>
    </section>

    <!--- Latest News --->
    <section class="latest-news">
      <div class="center-news">
        <img class="center-img" src="img/BUJIN LOGO 1.png" alt="" />
        <h2>What is Batik?</h2>
        <p>
          Batik is a dyeing technique using wax resist. The term is also used to
          describe patterned textiles created with that technique. Batik is made
          by drawing or stamping wax on a cloth to prevent colour absorption
          during the dyeing process. This creates a patterned negative when the
          wax is removed from the dyed cloth. Artisans may create intricate
          coloured patterns with multiple cycles of wax application and dyeing.
          Patterns and motifs vary widely even within countries. Some patterns
          hold symbolic significance and are used only in certain occasions,
          while others were created to satisfy market demand and fashion trends.
        </p>
      </div>
    </section>

    <!-- Making of Batik Section -->
    <section class="history-section">
      <div class="container">
        <h2>The Making of Batik</h2>
        <p class="subtitle">
          Our batik design is modern, the method remains authentic and
          handcrafted
        </p>

        <div class="history-content">
          <p class="preview-text">
            Batik is a traditional cloth-dyeing technique that has been
            practiced for centuries in many cultures around the world, including
            Malaysia. In this country, batik has been a part of the cultural
            heritage for generations, with a rich history dating back to the
            15th century. Our production is proud to say that we have maintained
            the traditional intricacy to produce spectacular modern designs.
          </p>
          <div class="expanded-text">
            <p>
              Our process involves using wax blend to block areas of the fabric
              from being dyed, allowing craftsmen to create intricate and highly
              detailed patterns. The wax is typically made from a mixture of
              beeswax and resin, and it is applied to the fabric in a carefully
              controlled manner. Once the wax has been applied, the fabric is
              then dyed, which then penetrates into the areas that are not
              covered by the wax. This process is replicated over and over again
              to create layers that forms the final product.
            </p>
            <p>
              Batik has been used to create a wide variety of styles, including
              everything from brightly colored abstract patterns to more subtle,
              tonal designs. It is a versatile technique that can be used to
              create anything from clothing and accessories to home d√©cor and
              more. In recent years, batik has become particularly popular in
              the fashion world, and it has been embraced by a wide range of
              designers and fashion houses.
            </p>
            <p>
              One of the key reasons for the popularity of batik in the fashion
              world is its unique and timeless aesthetic. The intricate patterns
              and bold colors used in batik designs are eye-catching and can add
              a touch of individuality to any outfit. The traditional Indonesian
              roots of batik also add a sense of cultural significance to the
              designs, which is appealing to many people.
            </p>
            <p>
              Another factor contributing to the popularity of batik in global
              fashion is that it is a labor-intensive process, which means that
              the clothing and accessories created using batik are often of
              higher quality than mass-produced items.
            </p>
          </div>
          <button class="read-more-btn" onclick="toggleText(this)">
            Read More
          </button>
        </div>
      </div>
    </section>

    <!-- Malaysian Batik Section -->
    <section class="malaysian-batik">
      <div class="container">
        <div class="batik-content">
          <div class="batik-image">
            <img src="img/Batik/Malaysian Batik.png" alt="Malaysian Batik" />
          </div>
          <div class="batik-text">
            <h2>Malaysian Batik</h2>
            <p>
              Malaysian batik is batik textile art in Malaysia, especially on
              the east coast of Peninsular Malaysia 42% from Kelantan, 36% from
              Terengganu and 22% from Pahang. The most popular motifs are leaves
              and flowers. Malaysian batik depicting humans or animals are rare
              because Islam norms forbid animal images as decoration. However,
              the butterfly theme is a common exception.
            </p>
            <p>
              Malaysian batik is also famous for its geometrical designs, such
              as spirals. The method of Malaysian batik making is also quite
              different from those of Indonesian Javanese batik, the pattern is
              larger and simpler, it seldom or never uses canting to create
              intricate patterns and relies heavily on brush painting method to
              apply colours on fabrics. The colours also tend to be lighter and
              more vibrant than the deep coloured Javanese batik.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Feedback Section -->
    <section class="review">
      <div class="review-content">
        <ul class="review-carousel" id="review-container">
          <!-- Reviews will be dynamically loaded here -->
        </ul>
      </div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetchReviews();
      });

      function fetchReviews() {
        // Fetch reviews from localStorage
        let storedFeedback = localStorage.getItem("userFeedback") || "[]";
        let feedbackList = JSON.parse(storedFeedback);

        const reviewContainer = document.getElementById("review-container");
        reviewContainer.innerHTML = ""; // Clear existing content

        if (feedbackList.length === 0) {
          reviewContainer.innerHTML = "<p>No reviews available.</p>";
          return;
        }

        feedbackList.forEach((feedback) => {
          const reviewCard = document.createElement("li");
          reviewCard.classList.add("review-card");

          reviewCard.innerHTML = `
                    <div class="review-img">
                        <h3>${feedback.name}</h3>
                        <span>${feedback.feedback}</span>
                    </div>
                    <div class="rating">
                        ${getStarRating(feedback.rating)}
                    </div>
                `;
          reviewContainer.appendChild(reviewCard);
        });
      }

      function getStarRating(rating) {
        let stars = "";
        for (let i = 1; i <= 5; i++) {
          stars +=
            i <= rating
              ? '<i class="fa fa-star"></i>'
              : '<i class="fa fa-star-o"></i>';
        }
        return stars;
      }

      function toggleText(button) {
        const content = button.previousElementSibling; // gets the expanded-text div
        const isExpanded = content.style.maxHeight;

        if (!isExpanded) {
          content.style.maxHeight = content.scrollHeight + "px";
          button.textContent = "Read Less";
        } else {
          content.style.maxHeight = null;
          button.textContent = "Read More";
        }
      }
    </script>

    <style>
      .expanded-text {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-out;
      }

      .read-more-btn {
        background: #fbd875;
        color: #04023c;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
        transition: background-color 0.3s ease;
      }

      .read-more-btn:hover {
        background: #04023c;
        color: #fbd875;
      }

      .history-content {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      .preview-text {
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .expanded-text p {
        margin-bottom: 15px;
        line-height: 1.6;
      }
    </style>

    <!--- Latest News --->
    <section class="cta-info">
      <div class="center-info">
        <img class="info-img" src="img/BUJIN LOGO 1.png" alt="" />
        <h2>History of Batik</h2>
        <p>
          The origin of batik production in Malaysia is known through trade
          relations between the Melayu Kingdom in Jambi and Javanese coastal
          cities. These relations have thrived since the 13th century. The
          northern coastal batik-producing areas of Java (Cirebon, Lasem, Tuban,
          and Madura) have influenced Jambi batik. This Jambi (Sumatran) batik,
          as well as Javanese batik, has influenced the batik craft in the Malay
          Peninsula.
        </p>
        <a href="https://wa.me/+60132928980" class="info-btn">Contact Us</a>
      </div>
    </section>

    <footer id="footer"></footer>
    <script>
      fetch("pages/footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer").innerHTML = data;
        })
        .catch((error) => console.error("Error loading footer:", error));
    </script>
  </body>
</html>
